/**
 * KB1 Theme - Designer-friendly CSS variables
 * 
 * To update visuals:
 * 1. Export assets from Figma to src/assets/ui/
 * 2. Update the URLs in this file to reference new assets
 * 3. No code changes needed - components automatically pick up new visuals
 * 
 * Theme Modes:
 * - .theme-kb1-dark - Dark mode (default)
 * - .theme-kb1-light - Light mode
 * 
 * All components use CSS variables, so switching themes is automatic.
 */

/* ===== DARK MODE (Default) ===== */
.theme-kb1-dark {
  /* ===== Generic Color Variables (used throughout app) ===== */
  --color-background: #0F0F0F;
  --color-background-soft: #0F0F0F;
  --color-background-mute: #0F0F0F;
  --color-border: transparent;
  --color-border-hover: transparent;
  --color-divider: rgba(234, 234, 234, 0.2);
  --color-text: #EAEAEA;
  --color-text-muted: rgba(234, 234, 234, 0.32);
  
  /* ===== KB1 Brand Colors ===== */
  --kb1-background: #0F0F0F;
  --kb1-text-primary: #EAEAEA;
  --kb1-text-secondary: rgba(234, 234, 234, 0.32);
  
  /* ===== Panel Backgrounds ===== */
  /* These would reference Figma-exported images for each settings section */
  --lever-panel-bg: url('/src/assets/ui/lever-panel.svg');
  --lever-push-panel-bg: url('/src/assets/ui/lever-push-panel.svg');
  --touch-panel-bg: url('/src/assets/ui/touch-panel.svg');
  --scale-panel-bg: url('/src/assets/ui/scale-panel.svg');
  
  /* ===== Fader Elements ===== */
  /* Designers can export specific fader track and thumb images */
  --fader-track-bg: url('/src/assets/ui/fader-track.svg');
  --fader-thumb-bg: url('/src/assets/ui/fader-thumb.svg');
  --fader-track-height: 200px;
  --fader-thumb-size: 24px;
  
  /* ===== Button States ===== */
  /* Primary buttons (Apply, Save, etc.) */
  --btn-primary-bg: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  --btn-primary-bg-hover: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  --btn-primary-bg-disabled: #1e3a5f;
  --btn-primary-color: #ffffff;
  --btn-primary-color-disabled: #94a3b8;
  
  /* Secondary buttons (Load, Reset, etc.) */
  --btn-secondary-bg: var(--kb1-background);
  --btn-secondary-bg-hover: rgba(234, 234, 234, 0.05);
  --btn-secondary-bg-disabled: var(--kb1-background);
  --btn-secondary-color: var(--kb1-text-primary);
  --btn-secondary-color-disabled: var(--kb1-text-secondary);
  --btn-secondary-border: 1px solid transparent;
  
  /* ===== Color Tokens (from design system) ===== */
  --kb1-color-primary: #3b82f6;
  --kb1-color-primary-hover: #2563eb;
  --kb1-color-primary-active: #1d4ed8;
  
  --kb1-color-accent: #8b5cf6;
  --kb1-color-accent-hover: #7c3aed;
  
  --kb1-color-success: #10b981;
  --kb1-color-warning: #f59e0b;
  --kb1-color-error: #ef4444;
  
  /* ===== Bluetooth Status Colors ===== */
  --bluetooth-status-inactive: #47708E;
  --bluetooth-status-active: #74C4FF;
  --bluetooth-icon-filter-active: brightness(0) saturate(100%) invert(65%) sepia(45%) saturate(1154%) hue-rotate(174deg) brightness(101%) contrast(101%);
  --bluetooth-icon-filter-inactive: none;
  
  /* ===== UI Accent Colors (dark mode defaults) ===== */
  --accent-highlight: #F9AC20; /* Original orange/yellow */
  --label-gray: #848484; /* Original gray */
  
  /* ===== SVG Icon Filters (dark mode) ===== */
  --svg-icon-filter: none;
  
  /* ===== Typography ===== */
  --kb1-font-family: 'Roboto Mono';
  --kb1-font-family-mono: 'Roboto Mono';
  --kb1-font-size-xs: 0.8125rem; /* 13px */
  --kb1-font-size-sm: 0.8125rem; /* 13px */
  --kb1-font-size-base: 0.8125rem; /* 13px */
  --kb1-font-size-lg: 0.8125rem; /* 13px */
  --kb1-font-size-xl: 0.8125rem; /* 13px */
  --kb1-font-size-2xl: 0.8125rem; /* 13px */
  
  /* ===== Spacing ===== */
  --kb1-spacing-xs: 0.25rem;
  --kb1-spacing-sm: 0.5rem;
  --kb1-spacing-md: 1rem;
  --kb1-spacing-lg: 1.5rem;
  --kb1-spacing-xl: 2rem;
  --kb1-spacing-2xl: 3rem;
  
  /* ===== Border Radius ===== */
  --kb1-radius-sm: 4px;
  --kb1-radius-md: 6px;
  --kb1-radius-lg: 8px;
  --kb1-radius-xl: 12px;
  --kb1-radius-full: 9999px;
  
  /* ===== Settings Panel Styling ===== */
  --settings-panel-padding: 1.5rem;
  --settings-panel-gap: 1rem;
  --settings-panel-bg: var(--color-background-soft);
  --settings-panel-border: 1px solid var(--color-border);
  --settings-panel-radius: var(--kb1-radius-lg);
  
  /* ===== Input Styling ===== */
  --input-bg: var(--color-background);
  --input-border: 1px solid var(--color-border);
  --input-border-focus: 1px solid var(--kb1-color-primary);
  --input-radius: var(--kb1-radius-md);
  --input-padding: 0.75rem;
  --input-color: var(--color-text);
  
  /* ===== Select/Dropdown Styling ===== */
  --select-bg: var(--color-background);
  --select-border: 1px solid var(--color-border);
  --select-border-focus: 1px solid var(--kb1-color-primary);
  --select-radius: var(--kb1-radius-md);
  --select-padding: 0.75rem;
  --select-color: var(--color-text);
  
  /* ===== Label Styling ===== */
  --label-color: var(--color-text);
  --label-font-size: var(--kb1-font-size-sm);
  --label-font-weight: 500;
  
  /* ===== Title Block Styling ===== */
  --title-color: var(--color-text);
  --title-font-size: var(--kb1-font-size-xl);
  --title-font-weight: 600;
  --title-cc-color: var(--kb1-color-primary);
  --title-cc-bg: rgba(37, 99, 235, 0.1);
  --title-cc-padding: 0.5rem 1rem;
  --title-cc-radius: var(--kb1-radius-md);
}

/* ===== LIGHT MODE ===== */
.theme-kb1-light {
  /* ===== Generic Color Variables (used throughout app) ===== */
  --color-background: #F8F8F8;
  --color-background-soft: #F8F8F8;
  --color-background-mute: #F8F8F8;
  --color-border: transparent;
  --color-border-hover: transparent;
  --color-divider: rgba(0, 0, 0, 0.2);
  --color-text: #0D0D0D;
  --color-text-muted: rgba(0, 0, 0, 0.6);
  
  /* ===== KB1 Brand Colors (Inverted) ===== */
  --kb1-background: #F8F8F8;
  --kb1-text-primary: #0D0D0D;
  --kb1-text-secondary: rgba(0, 0, 0, 0.6);
  
  /* ===== Panel Backgrounds ===== */
  /* Light mode versions of panel backgrounds */
  --lever-panel-bg: url('/src/assets/ui/lever-panel-light.svg');
  --lever-push-panel-bg: url('/src/assets/ui/lever-push-panel-light.svg');
  --touch-panel-bg: url('/src/assets/ui/touch-panel-light.svg');
  --scale-panel-bg: url('/src/assets/ui/scale-panel-light.svg');
  
  /* ===== Fader Elements ===== */
  /* Light mode fader assets */
  --fader-track-bg: url('/src/assets/ui/fader-track-light.svg');
  --fader-thumb-bg: url('/src/assets/ui/fader-thumb-light.svg');
  --fader-track-height: 200px;
  --fader-thumb-size: 24px;
  
  /* ===== Button States ===== */
  /* Primary buttons - darker blues for better contrast on light bg */
  --btn-primary-bg: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  --btn-primary-bg-hover: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
  --btn-primary-bg-disabled: #cbd5e1;
  --btn-primary-color: #ffffff;
  --btn-primary-color-disabled: #64748b;
  
  /* Secondary buttons */
  --btn-secondary-bg: var(--kb1-background);
  --btn-secondary-bg-hover: rgba(26, 26, 26, 0.05);
  --btn-secondary-bg-disabled: var(--kb1-background);
  --btn-secondary-color: var(--kb1-text-primary);
  --btn-secondary-color-disabled: var(--kb1-text-secondary);
  --btn-secondary-border: 1px solid transparent;
  
  /* ===== Color Tokens (adjusted for light mode contrast) ===== */
  --kb1-color-primary: #2563eb;
  --kb1-color-primary-hover: #1d4ed8;
  --kb1-color-primary-active: #1e40af;
  
  --kb1-color-accent: #7c3aed;
  --kb1-color-accent-hover: #6d28d9;
  
  --kb1-color-success: #059669;
  --kb1-color-warning: #d97706;
  --kb1-color-error: #dc2626;
  
  /* ===== Bluetooth Status Colors (inverted for light mode) ===== */
  --bluetooth-status-inactive: #5a89af;
  --bluetooth-status-active: #2563eb;
  --bluetooth-icon-filter-active: brightness(0) saturate(100%) invert(35%) sepia(98%) saturate(2084%) hue-rotate(213deg) brightness(96%) contrast(92%);
  --bluetooth-icon-filter-inactive: brightness(0) saturate(100%) invert(50%) sepia(15%) saturate(1000%) hue-rotate(174deg) brightness(90%) contrast(90%);
  
  /* ===== UI Accent Colors (light mode overrides) ===== */
  --accent-highlight: #5B21B6; /* Dark violet - replaces orange */
  --label-gray: #404040; /* Darker charcoal - replaces #848484 */
  
  /* ===== SVG Icon Filters (light mode) ===== */
  /* Simple inversion for toggle and profile graphics */
  --svg-icon-filter: invert(1);
  
  /* ===== Typography ===== */
  --kb1-font-family: 'Roboto Mono';
  --kb1-font-family-mono: 'Roboto Mono';
  --kb1-font-size-xs: 0.8125rem; /* 13px */
  --kb1-font-size-sm: 0.8125rem; /* 13px */
  --kb1-font-size-base: 0.8125rem; /* 13px */
  --kb1-font-size-lg: 0.8125rem; /* 13px */
  --kb1-font-size-xl: 0.8125rem; /* 13px */
  --kb1-font-size-2xl: 0.8125rem; /* 13px */
  
  /* ===== Spacing ===== */
  --kb1-spacing-xs: 0.25rem;
  --kb1-spacing-sm: 0.5rem;
  --kb1-spacing-md: 1rem;
  --kb1-spacing-lg: 1.5rem;
  --kb1-spacing-xl: 2rem;
  --kb1-spacing-2xl: 3rem;
  
  /* ===== Border Radius ===== */
  --kb1-radius-sm: 4px;
  --kb1-radius-md: 6px;
  --kb1-radius-lg: 8px;
  --kb1-radius-xl: 12px;
  --kb1-radius-full: 9999px;
  
  /* ===== Settings Panel Styling ===== */
  --settings-panel-padding: 1.5rem;
  --settings-panel-gap: 1rem;
  --settings-panel-bg: var(--color-background-soft);
  --settings-panel-border: 1px solid var(--color-border);
  --settings-panel-radius: var(--kb1-radius-lg);
  
  /* ===== Input Styling ===== */
  --input-bg: var(--color-background);
  --input-border: 1px solid var(--color-border);
  --input-border-focus: 1px solid var(--kb1-color-primary);
  --input-radius: var(--kb1-radius-md);
  --input-padding: 0.75rem;
  --input-color: var(--color-text);
  
  /* ===== Select/Dropdown Styling ===== */
  --select-bg: var(--color-background);
  --select-border: 1px solid var(--color-border);
  --select-border-focus: 1px solid var(--kb1-color-primary);
  --select-radius: var(--kb1-radius-md);
  --select-padding: 0.75rem;
  --select-color: var(--color-text);
  
  /* ===== Label Styling ===== */
  --label-color: var(--color-text);
  --label-font-size: var(--kb1-font-size-sm);
  --label-font-weight: 500;
  
  /* ===== Title Block Styling ===== */
  --title-color: var(--color-text);
  --title-font-size: var(--kb1-font-size-xl);
  --title-font-weight: 600;
  --title-cc-color: var(--kb1-color-primary);
  --title-cc-bg: rgba(37, 99, 235, 0.1);
  --title-cc-padding: 0.5rem 1rem;
  --title-cc-radius: var(--kb1-radius-md);
}

/* ===== Smooth Theme Transitions ===== */
.theme-kb1-dark,
.theme-kb1-light {
  transition: background-color 0.3s ease, color 0.3s ease;
}

.theme-kb1-dark *,
.theme-kb1-light * {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* ===== Helper: Fallback for missing images ===== */
/* If designer hasn't exported an image yet, show a gradient placeholder */
.theme-kb1-dark .settings-lever,
.theme-kb1-dark .settings-leverpush,
.theme-kb1-dark .settings-touch,
.theme-kb1-dark .settings-scale,
.theme-kb1-light .settings-lever,
.theme-kb1-light .settings-leverpush,
.theme-kb1-light .settings-touch,
.theme-kb1-light .settings-scale {
  background: var(--settings-panel-bg);
  border: var(--settings-panel-border);
  border-radius: var(--settings-panel-radius);
  padding: var(--settings-panel-padding);
}

/* Individual panel background images (when provided) */
.theme-kb1-dark .settings-lever,
.theme-kb1-light .settings-lever {
  /* background-image: var(--lever-panel-bg); */
  background-size: cover;
  background-position: center;
}

.theme-kb1-dark .settings-leverpush,
.theme-kb1-light .settings-leverpush {
  /* background-image: var(--lever-push-panel-bg); */
  background-size: cover;
  background-position: center;
}

.theme-kb1-dark .settings-touch,
.theme-kb1-light .settings-touch {
  /* background-image: var(--touch-panel-bg); */
  background-size: cover;
  background-position: center;
}

.theme-kb1-dark .settings-scale,
.theme-kb1-light .settings-scale {
  /* background-image: var(--scale-panel-bg); */
  background-size: cover;
  background-position: center;
}

/* ===== SVG Icon Inversions (light mode only) ===== */
/* Apply filter to toggle switches and profile graphs */
.toggle-image,
.profile-graph,
.mode-graph,
.slider-toggle-image {
  filter: var(--svg-icon-filter);
  transition: filter 0.3s ease;
}

/* ===== Light Mode Text and Selector Inversions ===== */
/* Invert dark background selectors and inputs for maximum contrast in light mode */
.theme-kb1-light .picker-trigger,
.theme-kb1-light .dropdown-trigger,
.theme-kb1-light .dropdown-menu,
.theme-kb1-light .dropdown-item,
.theme-kb1-light .value-input,
.theme-kb1-light .tap-indicator,
.theme-kb1-light .note-display,
.theme-kb1-light .stepper-btn,
.theme-kb1-light .profile-btn,
.theme-kb1-light .modal-dialog,
.theme-kb1-light .input-text,
.theme-kb1-light .link-icon,
.theme-kb1-light .btn-live,
.theme-kb1-light .action-icon,
.theme-kb1-light .btn-create-preset,
.theme-kb1-light .preset-item,
.theme-kb1-light .preset-checkbox input[type="checkbox"],
.theme-kb1-light .btn-secondary,
.theme-kb1-light .time-display {
  filter: invert(1);
}

/* Override backgrounds for light mode to use blue-gray tone */
.theme-kb1-light .accordion-header {
  background: rgba(149, 151, 172, 0.2) !important;
}

.theme-kb1-light .accordion-section.is-open .accordion-header {
  background: rgba(149, 151, 172, 0.35) !important;
}

.theme-kb1-light .accordion-header:hover {
  background: rgba(149, 151, 172, 0.3) !important;
}

.theme-kb1-light .accordion-header:active {
  background: rgba(149, 151, 172, 0.45) !important;
}

.theme-kb1-light .slider-row {
  background: rgba(149, 151, 172, 0.2) !important;
}

.theme-kb1-light .slider-row:hover {
  background: rgba(149, 151, 172, 0.3) !important;
}

.theme-kb1-light .btn-live {
  background: rgba(149, 151, 172, 0.2) !important;
}

.theme-kb1-light .btn-live:hover {
  background: rgba(149, 151, 172, 0.3) !important;
}

.theme-kb1-light .btn-live:active {
  background: rgba(149, 151, 172, 0.45) !important;
}

.theme-kb1-light .btn-create-preset {
  background: rgba(149, 151, 172, 0.2) !important;
}

.theme-kb1-light .btn-create-preset:hover {
  background: rgba(149, 151, 172, 0.3) !important;
}

.theme-kb1-light .preset-item.active {
  background: rgba(149, 151, 172, 0.25) !important;
}

/* Invert entire slot indicator for light mode */
.theme-kb1-light .slot-indicator {
  filter: invert(1);
}

/* Invert piano keys for light mode */
.theme-kb1-light .key,
.theme-kb1-light .key.active,
.theme-kb1-light .key.root-note {
  filter: invert(1);
}

/* Also invert hover states for these elements */
.theme-kb1-light .dropdown-item:hover,
.theme-kb1-light .picker-trigger:hover,
.theme-kb1-light .input-text:focus,
.theme-kb1-light .picker-item.selected,
.theme-kb1-light .preset-item.selected,
.theme-kb1-light .color-picker-item.selected,
.theme-kb1-light .profile-btn.active,
.theme-kb1-light .profile-btn.active::after,
.theme-kb1-light .accordion-section.is-open .accordion-title h3,
.theme-kb1-light .tab-button.active,
.theme-kb1-light .tab-button.active::after,
.theme-kb1-light .tab-button:not(.active)::after {
  filter: invert(1);
}

/* Counter-invert title suffix to preserve violet accent color */
.theme-kb1-light .accordion-section.is-open .accordion-title h3 .title-suffix {
  filter: invert(1);
}
/* Add dark outline to color swatches for visibility in light mode */
.theme-kb1-light .color-swatch {
  border: 1px solid rgba(0, 0, 0, 0.4) !important;
}

.theme-kb1-light .color-swatch:hover {
  border-color: rgba(0, 0, 0, 0.6) !important;
}

/* Adjust root note outlines for light mode visibility */
.theme-kb1-light .key.root-note {
  box-shadow:
    inset 0 0 0 2px #0F0F0F,  /* Dark inner (inverts to light, blends with bg) */
    0 0 0 1px #CCCCCC;         /* Light outer (inverts to dark for visibility) */
}

/* Make preset timestamp darker (will invert inside inverted preset-item) */
.theme-kb1-light .preset-meta {
  color: #CCCCCC !important; /* Light gray inverts to dark gray for visibility */
}
